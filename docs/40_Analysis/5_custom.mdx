# ðŸ“˜ Custom analyzers

Composed from analyzer building blocks: 

* `charFilters`: pre-process characters of text for filtering/replacing (optional)
  htmlStrip, icuNormalize, mapping, persian
* `tokenizer`: splits text into tokens
  edgeGram, keyword, nGram, regexCaptureGroup, regexSplit, standard, uaxUrlEmail, whitespace
* `tokenFilters`: processes individual tokens (optional)
  asciiFolding, daitchMokotoffSoundex, edgeGram, englishPossessive,
  flattenGraph, icuFolding, icuNormalizer, kStemming, length, lowercase,
  nGram, porterStemming, regex, reverse, shingle, snowballStemming, spanishPluralStemming,
  stempel, stopword, trim, wordDelimiterGraph

## Custom analyzers

### last 4 digits
 <Playground url="https://search-playground.corp.mongodb.com/tools/code-playground/snapshots/669e6c98d49ef6fad98118ba">ðŸ”— Last 4 digit of phone number matching</Playground> (regex extraction during indexing, keyword analysis at query time)

### reverse token filter
<Playground url="https://search-playground.mongodb.com/tools/code-playground/snapshots/6683c8bc4a45448733549bbc">ðŸ”— Example of being able to do â€˜startsWithâ€™ and â€˜endsWithâ€™ using wildcard and â€˜reverseâ€™ token filter</Playground>

### starts-with
<Playground url="https://search-playground.mongodb.com/tools/code-playground/snapshots/6683c999934a05d9b585b6e7">ðŸ”— Example of being able to do â€˜startsWithâ€™, â€˜endsWithâ€™ and â€˜containsâ€™ using nGrams</Playground>

## Exercises

### HTML stripping indexer on English text

<Playground url="https://search-playground.corp.mongodb.com/tools/code-sandbox/snapshots/6796a293aa132ffc76719f61">ðŸ”— Stripping HTML tags for indexing</Playground>

From there:
  * `lucene.english` - "span" and "alert" are indexed/searchable
  * create an htmlStrip using custom analyzer where those don't match, but "look" and "here" do
  * now evolve such that "looking" matches too